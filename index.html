<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; margin: 0; padding: 10px; background: var(--tg-theme-bg-color); color: var(--tg-theme-text-color); padding-bottom: 80px; }
        .categories { display: flex; overflow-x: auto; gap: 10px; padding: 10px 0; sticky: top; background: var(--tg-theme-bg-color); z-index: 10; }
        .cat-btn { background: var(--tg-theme-secondary-bg-color); border: 1px solid #ddd; padding: 8px 15px; border-radius: 20px; white-space: nowrap; cursor: pointer; color: var(--tg-theme-text-color); }
        .cat-btn.active { background: var(--tg-theme-button-color); color: var(--tg-theme-button-text-color); }
        .card { display: none; border: 1px solid #e0e0e0; border-radius: 12px; padding: 15px; margin-bottom: 10px; background: var(--tg-theme-secondary-bg-color); }
        .card.show { display: block; }
        .price { color: #31b545; font-weight: bold; }
        button.add-btn { background: #31b545; color: white; border: none; padding: 10px; border-radius: 8px; width: 100%; cursor: pointer; }
        
        /* –ü–∞–Ω–µ–ª—å –∫–æ—Ä–∑–∏–Ω—ã –≤–Ω–∏–∑—É */
        .cart-panel {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: var(--tg-theme-secondary-bg-color);
            padding: 15px; border-top: 2px solid var(--tg-theme-button-color);
            display: none; text-align: center;
        }
        .order-btn { background: var(--tg-theme-button-color); color: var(--tg-theme-button-text-color); border: none; padding: 12px 25px; border-radius: 10px; font-weight: bold; width: 100%; }
    </style>
</head>
<body>

    <div class="categories">
        <div class="cat-btn active" onclick="filter('all', event)">–í—Å–µ</div>
        <div class="cat-btn" onclick="filter('mb', event)">–ú–∞—Ç–µ—Ä–∏–Ω–∫–∏</div>
        <div class="cat-btn" onclick="filter('cpu', event)">–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã</div>
        <div class="cat-btn" onclick="filter('ram', event)">–ü–∞–º—è—Ç—å</div>
    </div>

    <div id="products">
        <div class="card mb show">
            <h3>–ú–∞—Ç–µ—Ä–∏–Ω–∫–∞ 1 (X99-BD4)</h3>
            <p>4 –∫–∞–Ω–∞–ª–∞ –ø–∞–º—è—Ç–∏, –∞–∫—Ç–∏–≤–Ω—ã–π –æ—Ö–ª–∞–¥ VRM.</p>
            <div class="price">7500</div>
            <button class="add-btn" onclick="addToCart('X99-BD4', 7500)">–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–±–æ—Ä–∫—É</button>
        </div>
        <div class="card mb show">
            <h3>–ú–∞—Ç–µ—Ä–∏–Ω–∫–∞ 2 (X99-8D3)</h3>
            <p>–ü–æ–¥ DDR3 –ø–∞–º—è—Ç—å, –±—é–¥–∂–µ—Ç–Ω—ã–π —Ç–æ–ø.</p>
            <div class="price">6000</div>
            <button class="add-btn" onclick="addToCart('X99-8D3', 6000)">–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–±–æ—Ä–∫—É</button>
        </div>

        <div class="card cpu show">
            <h3>Xeon E5-2678 v3</h3>
            <p>12 —è–¥–µ—Ä, —Ä–∞–±–æ—Ç–∞–µ—Ç —Å DDR3 –∏ DDR4.</p>
            <div class="price">2500</div>
            <button class="add-btn" onclick="addToCart('E5-2678 v3', 2500)">–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–±–æ—Ä–∫—É</button>
        </div>
    </div>

    <div class="cart-panel" id="cartPanel">
        <div style="margin-bottom: 10px;">–í –∫–æ—Ä–∑–∏–Ω–µ —Ç–æ–≤–∞—Ä–æ–≤: <span id="cartCount">0</span></div>
        <button class="order-btn" onclick="sendOrder()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–∞ <span id="totalPrice">0</span> ‚ÇΩ</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        
        let cart = [];

        function filter(category, event) {
            document.querySelectorAll('.cat-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            document.querySelectorAll('.card').forEach(card => {
                card.classList.toggle('show', category === 'all' || card.classList.contains(category));
            });
        }

        function addToCart(name, price) {
            cart.push({name, price});
            updateCart();
            tg.HapticFeedback.impactOccurred('light'); // –í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
        }

        function updateCart() {
            const panel = document.getElementById('cartPanel');
            if (cart.length > 0) {
                panel.style.display = 'block';
                document.getElementById('cartCount').innerText = cart.length;
                const total = cart.reduce((sum, item) => sum + item.price, 0);
                document.getElementById('totalPrice').innerText = total;
            }
        }

        function sendOrder() {
            // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤—ã–π —Ç–µ–∫—Å—Ç –∑–∞–∫–∞–∑–∞
            let orderText = "üõí –ù–û–í–´–ô –ó–ê–ö–ê–ó:\n";
            let total = 0;
            cart.forEach((item, index) => {
                orderText += `${index + 1}. ${item.name} - ${item.price}‚ÇΩ\n`;
                total += item.price;
            });
            orderText += `\n–ò–¢–û–ì–û: ${total}‚ÇΩ`;

            tg.sendData(orderText); // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤—Å—é —Å—Ç—Ä–æ–∫—É –±–æ—Ç—É
        }
    </script>
</body>
</html>

