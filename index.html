<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg: var(--tg-theme-bg-color, #ffffff);
            --text: var(--tg-theme-text-color, #000000);
            --hint: var(--tg-theme-hint-color, #999);
            --btn: var(--tg-theme-button-color, #2481cc);
            --btn-text: var(--tg-theme-button-text-color, #ffffff);
            --sec-bg: var(--tg-theme-secondary-bg-color, #f5f5f5);
        }

        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; overflow-x: hidden; }

        /* –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ 2 –≤ —Ä—è–¥ */
        .container { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 10px; }
        .product-card { background: var(--sec-bg); border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; position: relative; }
        .product-card img { width: 100%; aspect-ratio: 1/1; object-fit: cover; cursor: pointer; }
        .product-info { padding: 8px; flex-grow: 1; display: flex; flex-direction: column; }
        .product-title { font-size: 14px; font-weight: 600; margin-bottom: 4px; }
        .product-desc { font-size: 11px; color: var(--hint); margin-bottom: 8px; line-height: 1.2; height: 26px; overflow: hidden; }
        .product-price { font-size: 16px; font-weight: bold; color: #31b545; margin-top: auto; }
        
        .add-to-cart-btn { background: var(--btn); color: var(--btn-text); border: none; width: 100%; padding: 8px; border-radius: 8px; margin-top: 8px; font-weight: 600; font-size: 13px; }

        /* –≠–∫—Ä–∞–Ω –∫–æ—Ä–∑–∏–Ω—ã (—Å–∫—Ä—ã—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) */
        #cart-page { position: fixed; top: 0; left: 100%; width: 100%; height: 100%; background: var(--bg); z-index: 1000; transition: 0.3s; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        #cart-page.active { left: 0; }

        .back-btn { background: none; border: none; color: var(--btn); font-size: 16px; margin-bottom: 20px; cursor: pointer; }
        .delivery-option { display: flex; gap: 10px; margin: 20px 0; }
        .delivery-btn { flex: 1; padding: 10px; border: 1px solid var(--btn); border-radius: 10px; background: none; color: var(--text); }
        .delivery-btn.selected { background: var(--btn); color: var(--btn-text); }

        /* –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–æ—Ä–∑–∏–Ω—ã –≤–Ω–∏–∑—É */
        .cart-footer { position: fixed; bottom: 0; width: 100%; padding: 15px; background: var(--bg); border-top: 1px solid var(--sec-bg); display: none; box-sizing: border-box; }
        .view-cart-btn { background: var(--btn); color: var(--btn-text); border: none; width: 100%; padding: 12px; border-radius: 12px; font-size: 16px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="main-page">
        <div style="padding: 15px; font-size: 20px; font-weight: bold;">–ú–∞–≥–∞–∑–∏–Ω Xeon X99</div>
        <div class="container" id="product-list">
            <div class="product-card">
                <img src="https://ae04.alicdn.com/kf/H215e96644f1c42268487779f64d0d34fG.jpg" onclick="showDetails('X99-BD4', '–¢–æ–ø–æ–≤–∞—è –ø–ª–∞—Ç–∞ —Å –∞–∫—Ç–∏–≤–Ω—ã–º –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ–º –∏ 4 –∫–∞–Ω–∞–ª–∞–º–∏ –ø–∞–º—è—Ç–∏. –ò–¥–µ–∞–ª—å–Ω–∞ –¥–ª—è 2666v3.')">
                <div class="product-info">
                    <div class="product-title">Huananzhi X99-BD4</div>
                    <div class="product-desc">–ê–∫—Ç–∏–≤–Ω—ã–π –æ—Ö–ª–∞–¥, mATX, 4xDDR4</div>
                    <div class="product-price">7500 ‚ÇΩ</div>
                    <button class="add-to-cart-btn" onclick="addToCart('X99-BD4', 7500)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                </div>
            </div>
            <div class="product-card">
                <img src="https://ae04.alicdn.com/kf/H946452240974415891465224376527.jpg" onclick="showDetails('Xeon E5-2666 v3', '10 —è–¥–µ—Ä, 20 –ø–æ—Ç–æ–∫–æ–≤. –õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è –∏–≥—Ä –Ω–∞ 2011-3 —Å–æ–∫–µ—Ç–µ.')">
                <div class="product-info">
                    <div class="product-title">E5-2666 v3</div>
                    <div class="product-desc">10 —è–¥–µ—Ä, 135W, –º–æ—â–Ω—ã–π –∑–≤–µ—Ä—å</div>
                    <div class="product-price">1900 ‚ÇΩ</div>
                    <button class="add-to-cart-btn" onclick="addToCart('E5-2666 v3', 1900)">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                </div>
            </div>
        </div>
    </div>

    <div id="cart-page">
        <button class="back-btn" onclick="closeCart()">‚Üê –ù–∞–∑–∞–¥ –∫ –ø–æ–∫—É–ø–∫–∞–º</button>
        <h2>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞</h2>
        <div id="cart-items"></div>
        
        <h3>–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è:</h3>
        <div class="delivery-option">
            <button id="btn-self" class="delivery-btn selected" onclick="setDelivery('–°–∞–º–æ–≤—ã–≤–æ–∑')">üèÉ –°–∞–º–æ–≤—ã–≤–æ–∑</button>
            <button id="btn-delivery" class="delivery-btn" onclick="setDelivery('–î–æ—Å—Ç–∞–≤–∫–∞')">üöö –î–æ—Å—Ç–∞–≤–∫–∞</button>
        </div>

        <button class="view-cart-btn" style="margin-top: 20px;" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
    </div>

    <div class="cart-footer" id="cart-footer">
        <button class="view-cart-btn" onclick="openCart()">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É (<span id="cart-total">0</span> ‚ÇΩ)</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        let cart = [];
        let deliveryType = '–°–∞–º–æ–≤—ã–≤–æ–∑';

        function addToCart(name, price) {
            cart.push({name, price});
            tg.HapticFeedback.impactOccurred('medium');
            updateFooter();
        }

        function updateFooter() {
            const footer = document.getElementById('cart-footer');
            if (cart.length > 0) {
                footer.style.display = 'block';
                const total = cart.reduce((s, i) => s + i.price, 0);
                document.getElementById('cart-total').innerText = total;
            }
        }

        function openCart() {
            const itemsDiv = document.getElementById('cart-items');
            itemsDiv.innerHTML = cart.map(i => `<div style="padding:10px; border-bottom:1px solid #eee;">${i.name} ‚Äî <b>${i.price} ‚ÇΩ</b></div>`).join('');
            document.getElementById('cart-page').classList.add('active');
        }

        function closeCart() {
            document.getElementById('cart-page').classList.remove('active');
        }

        function setDelivery(type) {
            deliveryType = type;
            document.getElementById('btn-self').classList.toggle('selected', type === '–°–∞–º–æ–≤—ã–≤–æ–∑');
            document.getElementById('btn-delivery').classList.toggle('selected', type === '–î–æ—Å—Ç–∞–≤–∫–∞');
        }

        function showDetails(name, desc) {
            tg.showAlert(`–û–ø–∏—Å–∞–Ω–∏–µ ${name}:\n\n${desc}`);
        }

        function checkout() {
            let total = cart.reduce((s, i) => s + i.price, 0);
            let text = `üõí –ù–û–í–´–ô –ó–ê–ö–ê–ó\n----------\n`;
            cart.forEach((i, idx) => text += `${idx+1}. ${i.name}\n`);
            text += `----------\nüí∞ –ò–¢–û–ì–û: ${total} ‚ÇΩ\nüì¶ –°–ø–æ—Å–æ–±: ${deliveryType}`;
            tg.sendData(text);
        }
    </script>
</body>
</html>

